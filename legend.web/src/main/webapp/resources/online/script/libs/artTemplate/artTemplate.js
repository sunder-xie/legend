/*-- 淘汽云修 2015-12-07 03:32:29 --*/
define(function(require,exports,module){var a=function(b,c){return a["object"==typeof c?"render":"compile"].apply(a,arguments)};!function(a,b){"use strict";a.version="2.0.0",a.openTag="<%",a.closeTag="%>",a.isEscape=!0,a.parser=null,a.render=function(a,b){var c=f(a);return void 0===c?g({id:a,name:"Render Error",message:"No Template"}):c(b)},a.compile=function(b,d){function e(c){try{return new k(c)+""}catch(e){return i?(e.id=b||d,e.name="Render Error",e.source=d,g(e)):a.compile(b,d,!0)(c)}}var f=arguments,i=f[2],j="anonymous";"string"!=typeof d&&(i=f[1],d=f[0],b=j);try{var k=h(d,i)}catch(l){return l.id=b||d,l.name="Syntax Error",g(l)}return e.prototype=k.prototype,e.toString=function(){return k.toString()},b!==j&&(c[b]=e),e},a.helper=function(b,c){a.prototype[b]=c},a.onerror=function(a){var c="[template]:\n"+a.id+"\n\n[name]:\n"+a.name;a.message&&(c+="\n\n[message]:\n"+a.message),a.line&&(c+="\n\n[line]:\n"+a.line,c+="\n\n[source]:\n"+a.source.split(/\n/)[a.line-1].replace(/^[\s\t]+/,"")),a.temp&&(c+="\n\n[temp]:\n"+a.temp),b.console&&console.error(c)};var c={},d="__proto__"in{},e="document"in b,f=function(b){var d=c[b];if(void 0===d&&e){var f=document.getElementById(b);if(f){var g=f.value||f.innerHTML;return a.compile(b,g.replace(/^\s*|\s*$/g,""))}}else if(c.hasOwnProperty(b))return d},g=function(b){function c(){return c+""}return a.onerror(b),c.toString=function(){return"{Template Error}"},c},h=function(){a.prototype={$render:a.render,$escapeHTML:function(a){return"string"==typeof a?a.replace(/&(?![\w#]+;)|[<>"']/g,function(a){return{"<":"&#60;",">":"&#62;",'"':"&#34;","'":"&#39;","&":"&#38;"}[a]}):a},$getValue:function(a){return"string"==typeof a||"number"==typeof a?a:"function"==typeof a?a():""}};var b=Array.prototype.forEach||function(a,b){for(var c=this.length>>>0,d=0;c>d;d++)d in this&&a.call(b,this[d],d,this)},c=function(a,c){b.call(a,c)},e="break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield,undefined",f=new RegExp(["/\\*(.|\n)*?\\*/|//[^\n]*\n|//[^\n]*$","'[^']*'|\"[^\"]*\"","\\.[s	\n]*[\\$\\w]+","\\b"+e.replace(/,/g,"\\b|\\b")+"\\b"].join("|"),"g"),g=function(a){return a=a.replace(f,",").replace(/[^\w\$]+/g,",").replace(/^,|^\d+|,\d+|,$/g,""),a?a.split(","):[]};return function(b,e){function f(a){return p+=a.split(/\n/).length-1,a=a.replace(/('|"|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n"),a=u[1]+"'"+a+"'"+u[2],a+"\n"}function h(b){var c=p;if(m?b=m(b):e&&(b=b.replace(/\n/g,function(){return p++,"$line="+p+";"})),0===b.indexOf("=")){var d=0!==b.indexOf("==");if(b=b.replace(/^=*|[\s;]*$/g,""),d&&a.isEscape){var f=b.replace(/\s*\([^\)]+\)/,"");!r.hasOwnProperty(f)&&!/^(include|print)$/.test(f)&&(b="$escapeHTML($getValue("+b+"))")}else b="$getValue("+b+")";b=u[1]+b+u[2]}return e&&(b="$line="+c+";"+b),i(b),b+"\n"}function i(a){a=g(a),c(a,function(a){q.hasOwnProperty(a)||(j(a),q[a]=!0)})}function j(a){var b;"print"===a?b=w:"include"===a?(s.$render=r.$render,b=x):(b="$data."+a,r.hasOwnProperty(a)&&(s[a]=r[a],b=0===a.indexOf("$")?"$helpers."+a:b+"===undefined?$helpers."+a+":"+b)),t+=a+"="+b+","}var k=a.openTag,l=a.closeTag,m=a.parser,n=b,o="",p=1,q={$data:!0,$helpers:!0,$out:!0,$line:!0},r=a.prototype,s={},t="var $helpers=this,"+(e?"$line=0,":""),u=d?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"],v=d?"if(content!==undefined){$out+=content;return content}":"$out.push(content);",w="function(content){"+v+"}",x="function(id,data){if(data===undefined){data=$data}var content=$helpers.$render(id,data);"+v+"}";c(n.split(k),function(a,b){a=a.split(l);var c=a[0],d=a[1];1===a.length?o+=f(c):(o+=h(c),d&&(o+=f(d)))}),n=o,e&&(n="try{"+n+"}catch(e){e.line=$line;throw e}"),n="'use strict';"+t+u[0]+n+"return new String("+u[3]+")";try{var y=new Function("$data",n);return y.prototype=s,y}catch(z){throw z.temp="function anonymous($data) {"+n+"}",z}}}()}(a,this),"undefined"!=typeof module&&module.exports&&(module.exports=a)});