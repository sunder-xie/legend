/*-- 淘汽云修 2016-03-09 04:48:56 --*/
define(function(require,exports,module){function a(e,f){if(f){var g={};e&&f.attr("paramName")&&(g[f.attr("paramName")]=e),b.post({url:f.attr("service_url2"),data:g,success:function(b){var e=f.siblings("script");if(e){var g=c.compile(e.html()),h=g({json:b});f.append(h);var i=f.attr("val");i&&(f.val(i),$fb=f.parent(".field_box").next(".field_box"),$fb.size()>0&&($select=$fb.find("select"),$select&&a(i,$select))),d.handleChoosenSelect(f)}}})}}var b=require("./ajax"),c=require("./../libs/artTemplate/artTemplate"),d=require("./chosenSelect");exports.init=function(e){$(e).size()>0&&$(e).each(function(b,c){$cascadeSelect=$(c),$cascadeSelect.find("select").each(function(a,b){$e=$(b),$e.find("option:gt(0)").remove(),d.handleChoosenSelect($e)}),$1select=$cascadeSelect.find("select:eq(0)"),$1select&&a(null,$1select);$(e).find("select")}),$("body").on("change",".cascadeSelect select",function(){$select=$(this);var a=$select.val();$select.parent(".field_box").nextAll(".field_box").find("select").each(function(a,b){$e=$(b),$e.find("option:gt(0)").remove(),d.handleChoosenSelect($e)});var e=$select.parent(".field_box").next(".field_box");if(e.size()>0){var f=e.find("select");if(f&&a){var g={};g[f.attr("paramName")]=a,b.post({url:f.attr("service_url2"),data:g,success:function(a){var b=f.siblings("script"),e=c.compile(b.html()),g=e({json:a});f.append(g),d.handleChoosenSelect(f)}})}}})}});