/*-- 淘汽云修 2016-03-09 04:48:56 --*/
define(function(require,exports,module){var a={init:function(b){a.fillHtml(b),a.bindEvent(b)},fillHtml:function(a){var b=$(".qxy_page_inner:eq(0)",a.dom),c=$(".opt_right").eq(0);b.empty(),b.append('<span class="disabled qxy_page_count">共'+a.itemSize+"条记录</span>"),a.current<1e4&&(a.current>1&&a.current<=a.pageCount?(a.width>900&&b.append('<a class="qxy_page_first" href="javascript:;">首页</a>'),b.append('<a href="javascript:;" class="qxy_page_prev">上一页</a>'),c.find("span:not(.disabled)").prev().remove(),c.find("span:not(.disabled)").before('<a href="javascript:;" class="qxy_link qxy_page_prev">上一页</a>')):(b.remove(".prevPage"),a.width>900&&b.append('<span class="disabled">首页</span>'),b.append('<span class="disabled">上一页</span>'),c.find("span:not(.disabled)").prev().remove(),c.find("span:not(.disabled)").before('<span class="disabled">上一页</span>'))),1==a.current?b.append('<span class="current">1</span>'):b.append('<a href="javascript:;" class="qxy_page_num">1</a>'),a.current>=4&&a.pageCount>5&&b.append("<span>...</span>");var d=a.current-1,e=a.current+1;for(a.current>a.pageCount-3&&(d=a.pageCount-3),1>d&&(d=1),a.current<4&&a.pageCount>=4&&(e=a.pageCount>4?4:4==a.pageCount?3:a.pageCount-1),1==a.pageCount&&(e=1);e>=d;d++)d<a.pageCount&&d>1&&(d!=a.current?b.append('<a href="javascript:;" class="qxy_page_num">'+d+"</a>"):b.append('<span class="current">'+d+"</span>"));a.current+1<a.pageCount-1&&a.pageCount>5&&b.append("<span>...</span>"),a.pageCount>1&&(a.current==a.pageCount?b.append('<span class="current">'+a.pageCount+"</span>"):b.append('<a href="javascript:;" class="qxy_page_num">'+a.pageCount+"</a>")),a.current<1e4&&(a.current<a.pageCount?(b.append('<a href="javascript:;" class="qxy_page_next">下一页</a>'),a.width>900&&b.append('<a class="qxy_page_last" href="javascript:;">末页</a>'),c.find("span:not(.disabled)").next().remove(),c.find("span:not(.disabled)").after('<a class="qxy_link qxy_page_next" href="javascript:;">下一页</a>')):(b.remove(".nextPage"),b.append('<span class="disabled">下一页</span>'),a.width>900&&b.append('<span class="disabled qxy_page_last">末页</span>'),c.find("span:not(.disabled)").next().remove(),c.find("span:not(.disabled)").after('<span class="disabled">下一页</span>'))),a.pageCount<=1?(b.append('<span class="qxy_go_num disabled">共'+a.pageCount+'页,去第 <input type="text" disabled="disabled" value=""> 页</span>'),b.append('<span class="qxy_go_btn disabled" href="javascript:;">跳转</span>')):(b.append('<span class="qxy_go_num">共'+a.pageCount+'页,去第 <input type="text" value=""> 页</span>'),b.append('<a class="qxy_go_btn" href="javascript:;">跳转</a>'))},bindEvent:function(b){b.dom.off("click","a.qxy_page_num").on("click","a.qxy_page_num",function(){var c=parseInt($(this).text());a.fillHtml({current:c,pageCount:b.pageCount,dom:b.dom,itemSize:b.itemSize}),"function"==typeof b.backFn&&b.backFn(c)}),b.dom.off("click","a.qxy_page_prev").on("click","a.qxy_page_prev",function(){var c=parseInt($("span.current",b.dom).text());1!=c&&(a.fillHtml({current:c-1,pageCount:b.pageCount,dom:b.dom,itemSize:b.itemSize}),"function"==typeof b.backFn&&b.backFn(c-1))}),b.dom.off("click","a.qxy_page_next").on("click","a.qxy_page_next",function(){var c=parseInt($("span.current",b.dom).text());c!=b.pageCount&&(a.fillHtml({current:c+1,pageCount:b.pageCount,dom:b.dom,itemSize:b.itemSize}),"function"==typeof b.backFn&&b.backFn(c+1))}),b.dom.off("click","a.qxy_page_first").on("click","a.qxy_page_first",function(){a.fillHtml({current:1,pageCount:b.pageCount,dom:b.dom,itemSize:b.itemSize}),"function"==typeof b.backFn&&b.backFn(1)}),b.dom.off("click","a.qxy_page_last").on("click","a.qxy_page_last",function(){a.fillHtml({current:b.pageCount,pageCount:b.pageCount,dom:b.dom,itemSize:b.itemSize}),"function"==typeof b.backFn&&b.backFn(b.pageCount)}),b.dom.off("click","a.qxy_go_btn").on("click","a.qxy_go_btn",function(){var c=parseInt(b.dom.find("span.current").text()),d=$(this).prev().find("input"),e=parseInt(d.val());return e>b.pageCount||!$.isNumeric(e)||e==c?void d.val("").focus():(a.fillHtml({current:b.pageCount,pageCount:b.pageCount,dom:b.dom,itemSize:b.itemSize}),void("function"==typeof b.backFn&&b.backFn(e||c)))})}};exports.init=function(b){var c=$.extend({dom:$(".qxy_page"),itemSize:0,pageCount:0,current:0,backFn:function(){}},b);c.width=c.dom.width(),a.init(c)}});