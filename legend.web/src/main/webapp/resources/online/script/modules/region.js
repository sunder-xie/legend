/*-- 淘汽云修 2016-03-09 04:48:56 --*/
define(function(require,exports,module){var a=require("./ajax");exports.init=function(b){var c=$("select",b),d=function(b,d,f,g){var h=(c.index(b),"");a.get({url:BASE_PATH+"/dict/getSubRegionByPid",data:{p_id:d},loadShow:!1,success:function(a){a.success?i(a,f):console.error(a.errorMsg)}});var i=function(a,c){var d=1;null!=a.data[0]&&(d=a.data[0].id),$.each(a.data,function(a,b){c==b.id?(h+="<option selected='selected' value='"+b.id+"'>"+b.regionName+"</option>",d=c):h+="<option value='"+b.id+"'>"+b.regionName+"</option>"}),b.html(h),e(b,d)}},e=function(a,e,f,g){var h=a.attr("id"),i=$("input[id^='"+h+"']",b);i.val(e);var j=$("input[name^='"+h+"']",b);j.val(a.find("option:selected").text());var k=c.index(a);if(c.length!=k+1){var l=$("select:eq("+(k+1)+")",b),i=$("input[type=hidden]:eq("+(k+1)+")",b);a.attr("region_p_id",e),d(l,e,i.val(),g)}};c.on("change",function(){var a=$(this).val();e($(this),a,"change")});var f=$("input[type=hidden]:eq(0)",b),g=$("select:eq(0)",b);if(""!=f.val())a.get({url:BASE_PATH+"/dict/getRegionListByIds",data:{ids:f.val()},loadShow:!1,success:function(a){a.success?d(g,a.data[0].parentId,f.val(),"change"):console.error(a.errorMsg)}});else{var h=g.attr("region_p_id");d(g,h,"","change")}}});